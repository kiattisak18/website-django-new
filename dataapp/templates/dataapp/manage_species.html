{% load static %}
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/png" href="{% static 'dataapp/img/logoweb2.png' %}">
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="{% static 'dataapp/css/styletable.css' %}">
  
  <title>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏û‡∏∑‡∏ä</title>
</head>
<body>

  <header class="site-header">
    <nav class="nav container">
      <a class="brand" href="">üåø Dalbergia Manager</a>


      <ul class="nav-links">
        <li><a href="{% url 'addspec' %}">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a></li>
        <li><a href="{% url 'speciesimage' %}">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</a></li>
        <li><a href="{% url 'mndata' %}">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a></li>
      </ul>
    </nav>
  </header>

  <main class="container my-2">
    <section class="card">
        
      <div class="card-header">
          <h2 class="page-title">üå± ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏û‡∏∑‡∏ä</h2>
          
          <form class="search-bar" method="get" action="{% url 'speciessearch' %}">
            <input 
              type="text" 
              name="message" 
              class="search-input" 
              placeholder=""
              value="{{ request.GET.message }}"
               required 
                oninvalid="this.setCustomValidity('‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤')" 
                oninput="this.setCustomValidity('')"
            >
            <button type="submit" class="btn btn-search">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
          </form>
      </div>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

              {% if messages %}
                  {% for message in messages %}
                      <script>
                          Swal.fire({
                              title: '‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',          // ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
                              text: '{{ message }}',     // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å views.py (‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢)
                              icon: 'success',           // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô (success, error, warning, info)
                              confirmButtonText: '‡∏ï‡∏Å‡∏•‡∏á',  // ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏∏‡πà‡∏°
                              confirmButtonColor: '#3085d6' // ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏°
                          });
                      </script>
                  {% endfor %}
              {% endif %}


      <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th scope="col" width="5%">#</th>
                <th scope="col" width="15%">‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå</th>
                <th scope="col" width="15%">‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ó‡∏¢</th>
                <th scope="col" width="25%">‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞</th>
                <th scope="col" width="10%">‡∏™‡∏Å‡∏∏‡∏•‡∏û‡∏∑‡∏ä</th>
                <th scope="col" width="10%">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                <th scope="col" width="10%">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</th>
                <th scope="col" width="10%">‡∏•‡∏ö</th>
              </tr>
            </thead>
            <tbody>
              {% for ss in spi %}
              <tr>
                <td scope="row" class="text-center"><b>{{ ss.species_id }}</b></td>
                <td class="text-italic">{{ ss.sci_name }}</td>
                <td>{{ ss.thai_name }}</td>
                <td class="text-desc">{{ ss.description|truncatechars:50 }}</td>
                <td><span class="badge">{{ ss.genus.genus_name }}</span></td>
                
                <td>
                    <a href="{% url 'testload' ss.species_id %}" class="btn btn-warning btn-sm">
                       ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                    </a>
                </td>
                <td>
                    <a href="{% url 'speciesupdate' ss.species_id %}" class="btn btn-info btn-sm">
                         ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                    </a>
                </td>
                <td>
                  <a href="{% url 'speciesdelete' ss.species_id %}" class="btn btn-danger btn-sm"
                     onclick="return confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö {{ ss.thai_name }} ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ?')">
                      ‡∏•‡∏ö
                  </a>
                </td>
              </tr>
              {% empty %}
              <tr>
                  <td colspan="8" class="text-center empty-row">
                      ‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
                  </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
      </div>

    </section>
  </main>
</body>
</html>